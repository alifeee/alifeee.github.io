<!DOCTYPE html>
<html lang="en">
  <head>
    <title>alifeee - Cryptography</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="icon" href="/favicon.ico" />

    
    
  </head>

  <body>
    <header>
      <h1>
        <a href="/">alifeee</a>
      </h1>
    </header>
    <main>
      <h2>Cryptography</h2>

      <h3>Caesar Cipher</h3>

      <p>
        The
        <a href="https://en.wikipedia.org/wiki/Caesar_cipher">Caesar cipher</a>
        is a substitution cipher for encoding secret messages. This page uses
        <a
          href="http://practicalcryptography.com/cryptanalysis/text-characterisation/quadgrams/"
          >trigram statistics</a
        >
        to automatically decode any Caesar ciphered message!
      </p>

      <div id="caesar-app" class="caesar app" v-scope>
        <div class="caesar input">
          <span class="label">Message</span>
          <textarea v-model="message" rows="3"></textarea>
          <div class="shift control">
            <span>A -> {{ letterAEncoded }}</span>
            <input
              type="range"
              min="0"
              max="25"
              value="0"
              step="1"
              v-model.number="shift"
            />
          </div>
        </div>
        <div class="caesar output">
          <p class="encode">
            <span class="label">Encoded Message</span>
            <span class="shift" :title="shiftTooltip">(&#8593; {{shift}})</span>
            <br />
            <span class="copyable" onclick="copyToClipboard(this)">
              <span class="message">{{ encodedMessage }}</span>
              <span class="copy dialog">Copied!</span>
              <img alt="copy icon" src="./copy.svg" class="copy icon" />
            </span>
          </p>
          <p class="decode">
            <span class="label">Decoded Message</span>
            <span class="shift" :title="shiftTooltip">(&#8595; {{shift}})</span>
            <br />
            <span class="copyable" onclick="copyToClipboard(this)">
              <span class="message">{{ decodedMessage }}</span>
              <span class="copy dialog">Copied!</span>
              <img alt="copy icon" src="./copy.svg" class="copy icon" />
            </span>
          </p>
        </div>
        <div
          class="caesar output"
          v-show="trigrams"
          @vue:mounted="loadTrigrams()"
        >
          <p class="auto">
            <span class="label">Auto Decoded Message</span>
            <span class="shift" :title="shiftTooltip"
              >(&#8595; {{autoshift}})</span
            >
            <br />
            <span class="copyable" onclick="copyToClipboard(this)">
              <span class="message">{{ autoMessage }}</span>
              <span class="copy dialog">Copied!</span>
              <img alt="copy icon" src="./copy.svg" class="copy icon" />
            </span>
          </p>
        </div>
      </div>

      <script type="module">
        import { encode, decode, crack } from "./scripts/cipher_caesar.js";
        import { createApp } from "https://unpkg.com/petite-vue?module";

        createApp({
          message: "Dszquphsbqiz jt gvo!",
          shift: 1,
          shiftTooltip: "Shifts each letter by this amount in the alphabet",
          get letterAEncoded() {
            return encode("A", this.shift);
          },
          trigrams: null,
          get encodedMessage() {
            return encode(this.message, this.shift);
          },
          get decodedMessage() {
            return decode(this.message, this.shift);
          },
          autoshift: 0,
          get autoMessage() {
            if (this.trigrams) {
              const { shift, message } = crack(this.message, this.trigrams);
              this.autoshift = shift;
              return message;
            }
          },
          loadTrigrams() {
            console.log("loading trigrams");
            fetch("./stats/trigrams.json")
              .then((response) => response.json())
              .then((data) => {
                this.trigrams = data;
              });
          },
        }).mount("#caesar-app");
      </script>
      <script>
        function copyToClipboard(element) {
          const text = element.querySelector(".message").innerText;
          navigator.clipboard.writeText(text);
          const dialog = element.querySelector(".copy.dialog");
          dialog.classList.add("active");
          setTimeout(() => {
            dialog.classList.remove("active");
          }, 1000);
        }
      </script>
    </main>
    <footer>
      <a class="backlink" href="../">Back to main page</a>
    </footer>
  </body>

  
</html>

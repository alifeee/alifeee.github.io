<!DOCTYPE html>
<html>

<head>
  <title>Cryptography</title>
  <link rel="stylesheet" href="/auxiliary/stylesheet.css" />
  <link rel="icon" href="/auxiliary/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-174930056-1"></script>
  <script src="/auxiliary/google-analytics.js"></script>

  <style>
    table {
      border-collapse: collapse;
    }
  </style>
</head>

<body>
  <h1><a href="/">alifeee</a></h1>
  <hr />
  <h2>Cryptography</h2>

  <h4>Caesar Cipher</h4>

  <p>
    The
    <a href="https://en.wikipedia.org/wiki/Caesar_cipher">Caesar cipher</a> is
    a simple substitution cipher. The substitution is shown below. Of note is
    the auto-decrypt button, which uses
    <a href="http://practicalcryptography.com/cryptanalysis/text-characterisation/quadgrams/">trigram statistics</a>
    to attempt to guess the correct shift, with a high success rate.
  </p>

  <p style="font-family: 'Lucida Console', monospace">
    |ABCDEFGHIJKLMNOPQRSTUVWXYZ|<br />|<span id="caesar_alphabet"></span>|
  </p>
  <table>
    <tr>
      <td colspan="2">
        <table style="width: 100%">
          <tr>
            <td style="width: 20%">
              Shift: <span id="caesar_shift_label">0</span>
            </td>
            <td>
              <input id="caesar_slider" type="range" min="0" max="26" value="0" step="1" style="width: 100%"
                oninput="Caesar.sliderShift()" onchange="Caesar.sliderShift()" />
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr></tr>
    <tr>
      <td><label for="caesar_raw">Raw/Unencoded Text</label></td>
      <td><label for="caesar_encoded">Encoded Text</label></td>
    </tr>
    <tr>
      <td><textarea id="caesar_raw" rows="3" cols="25"></textarea></td>
      <td><textarea id="caesar_encoded" rows="3" cols="25"></textarea></td>
    </tr>
    <tr>
      <td>
        <table style="width: 100%">
          <tr>
            <td>
              <button type="button" onClick="Caesar.buttonEncode()">
                Encode →
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.clear('caesar_raw')">
                Clear
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.copy('caesar_raw')">
                Copy
              </button>
            </td>
          </tr>
        </table>
      </td>
      <td>
        <table style="width: 100%">
          <tr>
            <td>
              <button type="button" onClick="Caesar.buttonDecode()">
                ← Decode
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.clear('caesar_encoded')">
                Clear
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.copy('caesar_encoded')">
                Copy
              </button>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <button type="button" onClick="Caesar.buttonAutoDecode()">
          Auto Decrypt
        </button>
      </td>
    </tr>
  </table>

  <hr />
  <h4>Binary Encoding</h4>
  <p>
    <a href="https://en.wikipedia.org/wiki/Binary-to-text_encoding">Binary Encoding</a>
    is writing a message as the binary representation as is used for ASCII or
    Unicode.
  </p>

  <table>
    <tr>
      <td><label for="binary_raw">Raw text</label></td>
      <td><label for="binary_encoded">Encoded Text</label></td>
    </tr>
    <tr>
      <td><textarea id="binary_raw" rows="3" cols="25"></textarea></td>
      <td><textarea id="binary_encoded" rows="3" cols="25"></textarea></td>
    </tr>
    <tr>
      <td>
        <table style="width: 100%">
          <tr>
            <td>
              <button type="button" onClick="Binary.buttonEncode()">
                Encode →
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.clear('binary_raw')">
                Clear
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.copy('binary_raw')">
                Copy
              </button>
            </td>
          </tr>
        </table>
      </td>
      <td>
        <table style="width: 100%">
          <tr>
            <td>
              <button type="button" onClick="Binary.buttonDecode()">
                ← Decode
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.clear('binary_encoded')">
                Clear
              </button>
            </td>
            <td>
              <button type="button" onClick="Common.copy('binary_encoded')">
                Copy
              </button>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

  <!-- vue app -->
  <h4>Vue</h4>
  <div id="caesar-app" class="caesar app" v-scope>
    <div class="caesar input">
      <textarea v-model="message"></textarea>
        <input type="range" min="0" max="25" value="0" step="1" style="width: 100%" v-model.number="shift" />
    </div>
    <div class="caesar output">
      <p class="encode">
        <span class="label">Encoded Message (&#8593; {{shift}}):</span>
        <span class="copyable" onclick="copyToClipboard(this)">
          {{ encodedMessage }}
        </span>
      </p>
      <p class="decode">
        <span class="label">Decoded Message (&#8595; {{shift}}):</span>
        <span class="copyable" onclick="copyToClipboard(this)">
          {{ decodedMessage }}
        </span>
      </p>
    </div>
    <div class="caesar output" v-show="trigrams" @vue:mounted="loadTrigrams()">
      <p class="auto">
        <span class="label">Most likely shift (&#8595; {{ autoshift }}):</span>
        {{ autoMessage }}
      </p>
    </div>
  </div>
  <script type="module">
    import { encode, decode, crack } from "./scripts/cipher_caesar.js";
    import { createApp } from 'https://unpkg.com/petite-vue?module'

    createApp({
      message: "default",
      shift: 1,
      trigrams: null,
      get encodedMessage() {
        return encode(this.message, this.shift)
      },
      get decodedMessage() {
        return decode(this.message, this.shift)
      },
      autoshift: 0,
      get autoMessage() {
        if (this.trigrams) {
          const { shift, message } = crack(this.message, this.trigrams)
          this.autoshift = shift
          return message
        }
      },
      loadTrigrams() {
        console.log("loading trigrams");
        fetch("./stats/trigrams.json")
          .then((response) => response.json())
          .then((data) => {
            this.trigrams = data
          })
      }
    }).mount('#caesar-app')
  </script>
  <script>
    function copyToClipboard(element) {
      const text = element.innerText
      const input = document.createElement('input')
      input.setAttribute('value', text)
      document.body.appendChild(input)
      input.select()
      const result = document.execCommand('copy')
      document.body.removeChild(input)
      return result
    }
  </script>
  <hr />
  <h2 style="text-align: center"><a href="../">Back to main page</a></h2>
</body>

<style>
  .caesar.app {
    display: flex;
    flex-wrap: wrap;
  }

  .caesar.app>* {
    min-width: 15rem;
    flex: 1;
  }
</style>

</html>
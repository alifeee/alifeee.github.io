<!DOCTYPE html>
<html>
<head>
<title>Diplomacy</title>
<meta charset="utf-8"/>
<link rel="stylesheet" href="../auxiliary/stylesheet.css">
<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
.graphTable, .graphTable *{
  border:none;
}
th, td {
  padding: 5px;
  text-align: left;
  white-space:nowrap;
}
body{
  max-width:1000px;
  width:1000px
}
</style>
</head>



<body>
<h1><a href="../">alifeee<a></h1>
<h2>Diplomacy Results</h2>

<div>
<table id="results" style="margin-left:auto;margin-right:auto;">
</table>
</div><br>

<div>
<table class="graphTable" width="100%">
  <tr>
    <td  width="50%">
      <div style="width:100%">
        <canvas id="performance_chart" width="5" height="190"></canvas>
      </div>
    </td>
    <td  width="50%">
      <div style="width:100%">
        <canvas id="alex_performance_chart" width="5" height="190"></canvas>
      </div>
    </td>
  </tr>
  <tr>
    <td  width="50%">
      <div style="width:100%">
        <canvas id="total_games_chart" width="5" height="190"></canvas>
      </div>
    </td>
    <td  width="50%">
      <div style="width:100%">
        <canvas id="4" width="5" height="190"></canvas>
      </div>
    </td>
  </tr>
</table>
</div>

</body>

<script src="https://alifeee.github.io/Chart.js"></script>
<script src="diplo_scripts.js"></script>
<script>
Chart.defaults.global.defaultFontColor = '#888';
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function () {
if (this.readyState == 4 && this.status == 200) {

  var games = JSON.parse(this.responseText);

  players =     create_players(games);
  scores =      create_performance(players);
  alex_scores = create_alex_performance(games, players);

  var tab = "";
  tab += table_headers(players);
  tab += table_data(games, players);
  tab += table_performance(players, scores);
  tab += table_alex_performance(players, alex_scores);
  var table = document.getElementById("results");
  table.innerHTML = tab;

  var player_names = [];
  var performances = [];
  var alex_performances = [];
  var total_games = [];
  for (player in scores) {
    player_names.push(player);
    performances.push(scores[player].toFixed(2));
    alex_performances.push(alex_scores[player].toFixed(2));
    total_games.push(Object.keys(players[player]).reduce((sum,key)=>sum+parseFloat(players[player][key]||0),0));
  }


  var combined = sort_by_second(player_names, performances, -1);
  performances_names = combined[0];
  performances = combined[1];

  var combined = sort_by_second(player_names, alex_performances, -1);
  alex_performances_names = combined[0];
  alex_performances = combined[1];

  var combined = sort_by_second(player_names, total_games, -1);
  total_games_names = combined[0];
  total_games = combined[1];

  bar_graph(performances_names, performances, 
      "performance_chart", "Performance");
  bar_graph(alex_performances_names, alex_performances, 
      "alex_performance_chart", "Alex\'s Performance");
  bar_graph(total_games_names, total_games,
      "total_games_chart", "Total Games Played");

}
};
xmlhttp.open("GET", "https://alifeee.github.io/diplomacy/results.json", true);
xmlhttp.send()
</script>
</body>
</html> 













